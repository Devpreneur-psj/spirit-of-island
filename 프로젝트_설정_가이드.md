# Aether Island 프로젝트 설정 가이드

## 1. 프로젝트 구조

```
정령의섬/
├── backend/          # FastAPI 백엔드
├── frontend/         # React 프론트엔드
├── shared/           # 공통 타입 정의
└── docker-compose.yml
```

## 2. 백엔드 설정

### 2.1 환경 변수 설정

`backend/.env` 파일 생성 (`.env.example` 참고):

```env
DATABASE_URL=postgresql://aether:aether123@localhost:5432/aether_island
JWT_SECRET_KEY=your-secret-key-change-in-production
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=30
CORS_ORIGINS=http://localhost:3000,http://localhost:5173
```

### 2.2 가상 환경 설정

```bash
cd backend
python -m venv venv
source venv/bin/activate  # Windows: venv\Scripts\activate
pip install -r requirements.txt
```

### 2.3 데이터베이스 설정

PostgreSQL 설치 및 실행:

```bash
# PostgreSQL 설치 (macOS)
brew install postgresql
brew services start postgresql

# 데이터베이스 생성
createdb aether_island
```

데이터베이스 초기화:

```bash
python init_db.py
python init_items.py  # 초기 아이템 데이터 생성
```

### 2.4 백엔드 실행

```bash
uvicorn app.main:app --reload --host 0.0.0.0 --port 8000
```

백엔드 API 문서: http://localhost:8000/docs

## 3. 프론트엔드 설정

### 3.1 의존성 설치

```bash
cd frontend
npm install
```

### 3.2 프론트엔드 실행

```bash
npm run dev
```

프론트엔드 주소: http://localhost:3000

## 4. Docker Compose 사용 (선택사항)

```bash
docker-compose up -d
```

## 5. 주요 기능

### 5.1 인증
- 회원가입: `/register`
- 로그인: `/login`
- JWT 토큰 기반 인증

### 5.2 마정령 관리
- 마정령 생성
- 마정령 목록 조회
- 마정령 상세 조회
- 먹이 주기
- 놀기
- 치료 ✅
- 씻기기 ✅
- 훈련하기 ✅
- 레벨 업 및 성장 단계 시스템 ✅

### 5.3 아이템 시스템
- 아이템 상점 ✅
- 아이템 구매 ✅
- 아이템 사용 ✅
- 인벤토리 ✅

### 5.4 대회 시스템
- 대회 목록 조회 ✅
- 대회 참가 ✅
- 대회 랭킹 조회 ✅
- 대회 타입별 점수 계산 ✅

### 5.5 마정령 자율 행동 AI
- 배고픔, 기분, 지루함, 날씨, 상태에 따라 자동 행동
- 백엔드에서 주기적으로 실행 (추후 구현)

## 6. API 엔드포인트

### 인증
- `POST /api/v1/auth/register` - 회원가입
- `POST /api/v1/auth/login` - 로그인
- `GET /api/v1/auth/me` - 현재 사용자 정보

### 마정령
- `GET /api/v1/spiritlings` - 마정령 목록
- `GET /api/v1/spiritlings/{id}` - 마정령 상세
- `POST /api/v1/spiritlings` - 마정령 생성
- `PATCH /api/v1/spiritlings/{id}` - 마정령 업데이트
- `POST /api/v1/spiritlings/{id}/feed` - 먹이 주기
- `POST /api/v1/spiritlings/{id}/play` - 놀기
- `POST /api/v1/spiritlings/{id}/heal` - 치료하기
- `POST /api/v1/spiritlings/{id}/clean` - 씻기기
- `POST /api/v1/spiritlings/{id}/train?stat_type={type}` - 훈련하기

### 아이템
- `GET /api/v1/items` - 아이템 목록
- `GET /api/v1/items/{id}` - 아이템 상세
- `GET /api/v1/user-items` - 사용자 아이템 목록
- `POST /api/v1/user-items/{item_id}/buy?quantity={quantity}` - 아이템 구매
- `POST /api/v1/user-items/{item_id}/use` - 아이템 사용

### 대회
- `GET /api/v1/competitions` - 대회 목록
- `GET /api/v1/competitions/{id}` - 대회 상세
- `GET /api/v1/competitions/{id}/ranking` - 대회 랭킹 조회
- `POST /api/v1/competitions/{id}/enter` - 대회 참가

## 7. 다음 단계

1. ✅ 아이템 시스템 구현 완료
2. ✅ 대회 시스템 구현 완료
3. ✅ 마정령 성장 시스템 구현 완료
4. 마정령 자율 행동 AI 백그라운드 작업 구현
5. 대회 보상 시스템 구현
6. 행동 로그 UI 구현
7. 레벨 업 알림 구현
8. 친구 시스템 구현
9. 마을 방문 기능 구현
10. 이미지/애니메이션 추가
11. 반응형 디자인 최적화

## 8. 문제 해결

### 백엔드 오류
- 데이터베이스 연결 확인
- 환경 변수 확인
- 포트 충돌 확인

### 프론트엔드 오류
- API 서버 연결 확인
- CORS 설정 확인
- 브라우저 콘솔 확인

## 9. 참고 사항

- 개발 환경에서는 자동 리로드가 활성화되어 있습니다
- 프로덕션 배포 시 환경 변수와 보안 설정을 변경해야 합니다
- 데이터베이스 백업을 정기적으로 수행하세요

